<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edit Flight {{ flight.Flight_number }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

</head>
<body>
        <header class="flytau-header">
  <div class="flytau-header__inner">
    <a class="flytau-brand" href="{{ url_for('home') }}">
      <img class="flytau-brand__logo" src="{{ url_for('static', filename='logo.png') }}" alt="FLYTAU logo">
      <div>
        <div class="flytau-brand__name">FLYTAU</div>
        <div class="flytau-brand__tagline">Find. Book. Fly.</div>
      </div>
    </a>
  </div>
</header>

<h1>Edit Flight {{ flight.Flight_number }}</h1>

{% if error %}
  <div class="error-box">{{ error }}</div>
{% endif %}

<!-- FLIGHT DETAILS -->
<h2>Flight details</h2>
<form method="POST">
    <input type="hidden" name="action" value="update_flight">

    <label>Origin</label>
    <select name="route" required>
        {% for r in routes %}
            <option value="{{ r.Route_id }}"
              {% if r.Route_id == flight.Route_id %}selected{% endif %}>
              {{ r.Origin_airport }} â†’ {{ r.Destination_airport }}
            </option>
        {% endfor %}
    </select>

    <label>Departure date</label>
    <input type="date" required name="departure_date" value="{{ flight.Departure_date }}">

    <label>Departure time</label>
    <input type="time" required name="departure_time" value="{{ flight.Departure_time }}">
    <label>Plane ID</label>
    <select name="plane_id" required>
        {% for p in planes %}
            <option value="{{ p.Plane_id }}"
              {% if p.Plane_id == flight.Plane_id %}selected{% endif %}>
              {{ p.Plane_id }}
            </option>
        {% endfor %}
    </select>
    <label>Economy Price</label>
    <input type="number" required name="economy_price" value="{{ flight.economy_price }}">
    {% if flight.Size == 'LARGE' %}
        <label>Business Price</label>
        <input type="number" required name="business_price" value="{{ flight.business_price }}">
    {% endif %}
    <label>Status</label>
    <select name="status" required>
        {% for s in ['ACTIVE', 'CANCELLED', 'DELAYED'] %}
            <option value="{{ s }}"
              {% if s == flight.Flight_status %}selected{% endif %}>
              {{ s }}
            </option>
        {% endfor %}
    </select>

    <button type="submit">Save flight details</button>
</form>

<hr>

<!-- CREW -->
<h2>Crew assignment</h2>
<form method="POST">
    <input type="hidden" name="action" value="update_crew">

    <!-- pilots -->
     <strong>Pilots:</strong><br>
    {% for pilot in pilots %}
        <label>
            <input type="checkbox" name="pilots"
                   value="{{ pilot.Employee_id }}"
                   {% if pilot.Employee_id in assigned_pilots %}checked{% endif %}>
            {{ pilot.Hebrew_first_name }} {{ pilot.Hebrew_last_name }}
        </label><br>
    {% endfor %}

    <!-- stewards -->
    <strong>Stewards:</strong><br>
    {% for steward in stewards %}
        <label>
            <input type="checkbox" name="stewards"
                   value="{{ steward.Employee_id }}"
                   {% if steward.Employee_id in assigned_stewards %}checked{% endif %}>
            {{ steward.Hebrew_first_name }} {{ steward.Hebrew_last_name }}
        </label><br>
    {% endfor %}

    <button type="submit">Save crew</button>
</form>
<form method="GET" action="{{ url_for('admin_dashboard') }}">
  <button type="submit">Back to Admin</button>  
</form>
</body>
</html>
