<!DOCTYPE html>
<html>
<head>
    <title>FLYTAU Check Out</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
   
</head>
<div class="corner-logo">
  <a href="{{ url_for('landing_page') }}">
    <img src="{{ url_for('static', filename='flytau_logo_circle.png') }}" alt="FLYTAU">
  </a>
</div>
<form method="POST" action="{{ url_for('passenger_details', flight_number=flight_number, count=count) }}">

{% for i in range(1, count + 1) %}
  {% if i == 1 and role == 'client' %}
    <h3>Passenger {{ i }} (Logged-in User)</h3>
    <input name="name_{{ i }}" placeholder="Full Name" value="{{ user.English_first_name }} {{ user.English_last_name }}" required>
    <input name="id_{{ i }}" placeholder="ID / Passport" value="{{ user.Passport_number }}" required>
    <select name="type_{{ i }}">
      <option value="ADULT" {% if user.type == 'ADULT' %}selected{% endif %}>Adult</option>
      <option value="CHILD" {% if user.type == 'CHILD' %}selected{% endif %}>Child</option>
    </select>
    <input name="email" placeholder="Email" value="{{ user.Email }}" required>
    <label class="field-label" for="birthdate_{{ i }}">Birth Date</label>
    <input id="birthdate_{{ i }}" name="birthdate" type="date" required aria-label="Birth Date" value="{{ user.Birth_date }}">
    
    <div class="phone-numbers-section">
      <label>Phone Number(s):</label>
      <div id="phone-container">
        <div class="phone-input-group">
          <input name="phone_number_1" type="tel" placeholder="Phone Number" value="{{ user.Phone_number }}" required>
        </div>
      </div>
      <button type="button" class="add-phone-btn" onclick="addPhoneField()">+ Add Another Phone</button>
    </div>
  {% else %}
    <h3>Passenger {{ i }}</h3>
    <input name="name_{{ i }}" placeholder="Full Name" required>
    <input name="id_{{ i }}" placeholder="ID / Passport" required>
    <select name="type_{{ i }}">
      <option value="ADULT">Adult</option>
      <option value="CHILD">Child</option>
      {% if i == 1 %}
        <input name="email" placeholder="Email" required>
        <label class="field-label" for="birthdate_{{ i }}">Birth Date</label>
        <input id="birthdate_{{ i }}" name="birthdate" type="date" required aria-label="Birth Date">
        
        <div class="phone-numbers-section">
          <label>Phone Number(s):</label>
          <div id="phone-container">
            <div class="phone-input-group">
              <input name="phone_number_1" type="tel" placeholder="Phone Number" required>
            </div>
          </div>
          <button type="button" class="add-phone-btn" onclick="addPhoneField()">+ Add Another Phone</button>
        </div>
      {% endif %}
    </select>
  {% endif %}
{% endfor %}

  <button type="submit">Next â†’ Seat Selection</button>

<script>
  let phoneCount = 1;
  
  function addPhoneField() {
    phoneCount++;
    const container = document.getElementById('phone-container');
    const div = document.createElement('div');
    div.className = 'phone-input-group';
    div.innerHTML = `
      <input name="phone_number_${phoneCount}" type="tel" placeholder="Phone Number">
      <button type="button" class="remove-phone-btn" onclick="removePhoneField(this)">Remove</button>
    `;
    container.appendChild(div);
  }
  
  function removePhoneField(button) {
    button.parentElement.remove();
  }
</script>
</body>
</html>
